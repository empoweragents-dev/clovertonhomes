{"version":3,"sources":["../../../../src/components/admin/InclusionsManagement.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\n\r\n// Define interfaces matching the API response\r\ninterface Tier {\r\n    id: string\r\n    name: string\r\n    slug: string\r\n    sortOrder: number\r\n}\r\n\r\ninterface Category {\r\n    id: string\r\n    name: string\r\n    headline: string\r\n    icon: string\r\n    sortOrder: number\r\n    items?: Item[] // Optional because global fetch might not have it, but Tier fetch does\r\n}\r\n\r\ninterface Item {\r\n    id: string\r\n    tierId: string\r\n    categoryId: string\r\n    title: string\r\n    description: string\r\n    imageUrl: string\r\n    badge: string\r\n    features: string[]\r\n    sortOrder: number\r\n}\r\n\r\ninterface InclusionsManagementProps {\r\n    initialCategories: any[]\r\n}\r\n\r\nexport default function InclusionsManagement({ initialCategories }: InclusionsManagementProps) {\r\n    const [view, setView] = useState<'content' | 'categories' | 'tiers'>('content')\r\n    const [tiers, setTiers] = useState<Tier[]>([])\r\n    const [categories, setCategories] = useState<Category[]>([])\r\n\r\n    // Content View State\r\n    const [activeTierId, setActiveTierId] = useState<string>('')\r\n    const [tierData, setTierData] = useState<Category[]>([]) // Categories with items for the active tier\r\n\r\n    // Loading State\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    // Modal State\r\n    const [showModal, setShowModal] = useState(false)\r\n    const [modalType, setModalType] = useState<'item' | 'category' | 'tier'>('item')\r\n    const [editData, setEditData] = useState<any>(null)\r\n\r\n    // Form States (for Item, Category, or Tier)\r\n    const [itemForm, setItemForm] = useState<Partial<Item> & { name?: string; headline?: string; icon?: string }>({\r\n        features: []\r\n    })\r\n\r\n    const [uploading, setUploading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        fetchAllData()\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        if (activeTierId) {\r\n            fetchTierData(activeTierId)\r\n        } else if (tiers.length > 0) {\r\n            setActiveTierId(tiers[0].id)\r\n        }\r\n    }, [tiers, activeTierId])\r\n\r\n    const fetchAllData = async () => {\r\n        setLoading(true)\r\n        try {\r\n            const [tiersRes, catsRes] = await Promise.all([\r\n                fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/inclusions/tiers`),\r\n                fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/inclusions/categories`)\r\n            ])\r\n\r\n            const tiersData = await tiersRes.json()\r\n            const catsData = await catsRes.json()\r\n\r\n            if (tiersData.success) {\r\n                setTiers(tiersData.data)\r\n                if (tiersData.data.length > 0 && !activeTierId) {\r\n                    setActiveTierId(tiersData.data[0].id)\r\n                }\r\n            }\r\n            if (catsData.success) setCategories(catsData.data)\r\n        } catch (err) {\r\n            console.error(err)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    const fetchTierData = async (tierId: string) => {\r\n        // Find slug\r\n        const tier = tiers.find(t => t.id === tierId)\r\n        if (!tier) return\r\n\r\n        try {\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/inclusions/tiers/${tier.slug}`)\r\n            const data = await res.json()\r\n            if (data.success) {\r\n                setTierData(data.data.categories)\r\n            }\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    const handleImageUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        if (!e.target.files || e.target.files.length === 0) return\r\n\r\n        const file = e.target.files[0]\r\n        const formData = new FormData()\r\n        formData.append('file', file)\r\n\r\n        setUploading(true)\r\n        try {\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/upload?bucket=GENERAL&folder=inclusions`, {\r\n                method: 'POST',\r\n                headers: { 'Authorization': `Bearer ${localStorage.getItem('admin_session')}` },\r\n                body: formData\r\n            })\r\n            const data = await res.json()\r\n            if (data.success) {\r\n                // Update form\r\n                setItemForm(prev => ({ ...prev, imageUrl: data.data.publicUrl }))\r\n            } else {\r\n                alert('Upload failed: ' + data.message)\r\n            }\r\n        } catch (err) {\r\n            console.error(err)\r\n            alert('Upload error')\r\n        } finally {\r\n            setUploading(false)\r\n        }\r\n    }\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        const token = localStorage.getItem('admin_session')\r\n\r\n        try {\r\n            let url = `${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/inclusions/`\r\n            let method = editData ? 'PUT' : 'POST'\r\n            let body = {}\r\n\r\n            if (modalType === 'item') {\r\n                url += `items${editData ? '/' + editData.id : ''}`\r\n                body = {\r\n                    ...itemForm,\r\n                    tierId: activeTierId, // Ensure tier is set\r\n                    categoryId: itemForm.categoryId // Ensure category is set\r\n                }\r\n            } else if (modalType === 'category') {\r\n                url += `categories${editData ? '/' + editData.id : ''}`\r\n                body = itemForm // Reusing state, but should separate if complex\r\n            } else if (modalType === 'tier') {\r\n                url += `tiers${editData ? '/' + editData.id : ''}`\r\n                body = itemForm\r\n            }\r\n\r\n            const res = await fetch(url, {\r\n                method,\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`\r\n                },\r\n                body: JSON.stringify(body)\r\n            })\r\n\r\n            const data = await res.json()\r\n            if (data.success) {\r\n                setShowModal(false)\r\n                // Refresh data\r\n                fetchAllData()\r\n                if (activeTierId) fetchTierData(activeTierId)\r\n            } else {\r\n                alert('Error: ' + data.message)\r\n            }\r\n\r\n        } catch (err) {\r\n            console.error(err)\r\n        }\r\n    }\r\n\r\n    const handleDelete = async (id: string, type: 'items' | 'categories' | 'tiers') => {\r\n        if (!confirm('Are you sure?')) return\r\n        const token = localStorage.getItem('admin_session')\r\n        try {\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/inclusions/${type}/${id}`, {\r\n                method: 'DELETE',\r\n                headers: { 'Authorization': `Bearer ${token}` }\r\n            })\r\n            if (res.ok) {\r\n                fetchAllData()\r\n                if (activeTierId) fetchTierData(activeTierId)\r\n            }\r\n        } catch (err) { console.error(err) }\r\n    }\r\n\r\n    const openItemModal = (category: Category, item?: Item) => {\r\n        setModalType('item')\r\n        setEditData(item || null)\r\n        setItemForm(item ? { ...item } : {\r\n            categoryId: category.id,\r\n            tierId: activeTierId,\r\n            features: [],\r\n            title: '',\r\n            description: '',\r\n            imageUrl: '',\r\n            badge: ''\r\n        })\r\n        setShowModal(true)\r\n    }\r\n\r\n    // Modal Component\r\n    const Modal = () => (\r\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto\">\r\n            <div className=\"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n                <h3 className=\"text-xl font-bold mb-6 capitalize\">\r\n                    {editData ? 'Edit' : 'Add'} {modalType}\r\n                </h3>\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n\r\n                    {/* Common Fields */}\r\n                    {(modalType === 'item' || modalType === 'category' || modalType === 'tier') && (\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold mb-1\">Name / Title</label>\r\n                            <input\r\n                                className=\"w-full border rounded p-2\"\r\n                                type=\"text\"\r\n                                value={itemForm.title || itemForm.name || ''}\r\n                                onChange={e => setItemForm(prev => ({\r\n                                    ...prev,\r\n                                    [modalType === 'item' ? 'title' : 'name']: e.target.value\r\n                                }))}\r\n                                required\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Category Specific */}\r\n                    {modalType === 'category' && (\r\n                        <div>\r\n                            <label className=\"block text-sm font-bold mb-1\">Headline</label>\r\n                            <input\r\n                                className=\"w-full border rounded p-2\"\r\n                                type=\"text\"\r\n                                value={itemForm.headline || ''}\r\n                                onChange={e => setItemForm(prev => ({ ...prev, headline: e.target.value }))}\r\n                            />\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Item Specific */}\r\n                    {modalType === 'item' && (\r\n                        <>\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold mb-1\">Description</label>\r\n                                <textarea\r\n                                    className=\"w-full border rounded p-2 h-24\"\r\n                                    value={itemForm.description || ''}\r\n                                    onChange={e => setItemForm(prev => ({ ...prev, description: e.target.value }))}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-4\">\r\n                                <div className=\"flex-1\">\r\n                                    <label className=\"block text-sm font-bold mb-1\">Badge (Optional)</label>\r\n                                    <input\r\n                                        className=\"w-full border rounded p-2\"\r\n                                        type=\"text\"\r\n                                        placeholder=\"e.g. New Release\"\r\n                                        value={itemForm.badge || ''}\r\n                                        onChange={e => setItemForm(prev => ({ ...prev, badge: e.target.value }))}\r\n                                    />\r\n                                </div>\r\n                                <div className=\"w-24\">\r\n                                    <label className=\"block text-sm font-bold mb-1\">Order</label>\r\n                                    <input\r\n                                        className=\"w-full border rounded p-2\"\r\n                                        type=\"number\"\r\n                                        value={itemForm.sortOrder || 0}\r\n                                        onChange={e => setItemForm(prev => ({ ...prev, sortOrder: parseInt(e.target.value) }))}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold mb-1\">Features (One per line)</label>\r\n                                <textarea\r\n                                    className=\"w-full border rounded p-2 h-32 bg-gray-50 font-mono text-sm\"\r\n                                    placeholder=\"Feature 1&#10;Feature 2&#10;Feature 3\"\r\n                                    value={Array.isArray(itemForm.features) ? itemForm.features.join('\\n') : ''}\r\n                                    onChange={e => setItemForm(prev => ({ ...prev, features: e.target.value.split('\\n') }))}\r\n                                />\r\n                            </div>\r\n\r\n                            <div>\r\n                                <label className=\"block text-sm font-bold mb-1\">Image</label>\r\n                                <div className=\"flex items-start gap-4\">\r\n                                    {itemForm.imageUrl && (\r\n                                        <img src={itemForm.imageUrl} alt=\"Preview\" className=\"w-24 h-24 object-cover rounded border\" />\r\n                                    )}\r\n                                    <div className=\"flex-1\">\r\n                                        <input\r\n                                            type=\"file\"\r\n                                            accept=\"image/*\"\r\n                                            onChange={handleImageUpload}\r\n                                            className=\"block w-full text-sm text-gray-500\r\n                                                file:mr-4 file:py-2 file:px-4\r\n                                                file:rounded-full file:border-0\r\n                                                file:text-sm file:font-semibold\r\n                                                file:bg-brand-charcoal file:text-white\r\n                                                hover:file:bg-black\"\r\n                                        />\r\n                                        {uploading && <p className=\"text-sm text-blue-500 mt-1\">Uploading...</p>}\r\n                                        <input\r\n                                            type=\"hidden\"\r\n                                            value={itemForm.imageUrl || ''}\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </>\r\n                    )}\r\n\r\n                    <div className=\"flex justify-end gap-2 mt-8 pt-4 border-t\">\r\n                        <button type=\"button\" onClick={() => setShowModal(false)} className=\"px-4 py-2 text-gray-500 hover:text-gray-700 font-medium\">Cancel</button>\r\n                        <button type=\"submit\" className=\"px-6 py-2 bg-brand-charcoal text-white rounded font-bold hover:bg-black transition-transform active:scale-95\">Save</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    if (loading && tiers.length === 0) return <div className=\"p-8 text-center text-gray-500\">Loading inclusions data...</div>\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n                <h1 className=\"text-2xl font-bold text-gray-800\">Inclusions Management</h1>\r\n                <div className=\"flex bg-white rounded-lg p-1 border shadow-sm\">\r\n                    <button\r\n                        onClick={() => setView('content')}\r\n                        className={`px-4 py-2 text-sm font-medium rounded-md transition-all ${view === 'content' ? 'bg-brand-charcoal text-white shadow' : 'text-gray-500 hover:text-gray-900'}`}\r\n                    >\r\n                        Content\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setView('categories')}\r\n                        className={`px-4 py-2 text-sm font-medium rounded-md transition-all ${view === 'categories' ? 'bg-brand-charcoal text-white shadow' : 'text-gray-500 hover:text-gray-900'}`}\r\n                    >\r\n                        Categories\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setView('tiers')}\r\n                        className={`px-4 py-2 text-sm font-medium rounded-md transition-all ${view === 'tiers' ? 'bg-brand-charcoal text-white shadow' : 'text-gray-500 hover:text-gray-900'}`}\r\n                    >\r\n                        Tiers\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Content View */}\r\n            {view === 'content' && (\r\n                <div className=\"space-y-6\">\r\n                    {/* Tier Tabs */}\r\n                    <div className=\"flex gap-2 p-1 bg-gray-100 rounded-lg w-max\">\r\n                        {tiers.map(tier => (\r\n                            <button\r\n                                key={tier.id}\r\n                                onClick={() => setActiveTierId(tier.id)}\r\n                                className={`px-6 py-2 rounded-md font-medium text-sm transition-all ${activeTierId === tier.id\r\n                                    ? 'bg-white text-brand-charcoal shadow-sm'\r\n                                    : 'text-gray-500 hover:text-gray-700'\r\n                                    }`}\r\n                            >\r\n                                {tier.name}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Content Grid */}\r\n                    <div className=\"grid gap-8\">\r\n                        {tierData.map(cat => (\r\n                            <div key={cat.id} className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                                <div className=\"p-4 bg-gray-50 border-b border-gray-100 flex items-center justify-between\">\r\n                                    <h3 className=\"font-bold text-lg text-brand-charcoal\">{cat.name}</h3>\r\n                                    <button\r\n                                        onClick={() => openItemModal(cat)}\r\n                                        className=\"text-xs font-bold text-brand-teal uppercase tracking-wider flex items-center gap-1 hover:text-teal-700\"\r\n                                    >\r\n                                        <span className=\"material-symbols-outlined text-sm\">add</span> Add Item\r\n                                    </button>\r\n                                </div>\r\n                                <div className=\"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n                                    {cat.items?.map(item => (\r\n                                        <div key={item.id} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative group\">\r\n                                            {/* Actions */}\r\n                                            <div className=\"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 p-1 rounded shadow-sm\">\r\n                                                <button onClick={() => openItemModal(cat, item)} className=\"p-1 hover:text-blue-500\"><span className=\"material-symbols-outlined text-lg\">edit</span></button>\r\n                                                <button onClick={() => handleDelete(item.id, 'items')} className=\"p-1 hover:text-red-500\"><span className=\"material-symbols-outlined text-lg\">delete</span></button>\r\n                                            </div>\r\n\r\n                                            <div className=\"flex items-start gap-4\">\r\n                                                {item.imageUrl && (\r\n                                                    <img src={item.imageUrl} alt={item.title} className=\"w-16 h-16 object-cover rounded bg-gray-100\" />\r\n                                                )}\r\n                                                <div>\r\n                                                    <h4 className=\"font-bold text-sm mb-1\">{item.title}</h4>\r\n                                                    {item.badge && <span className=\"text-[10px] font-bold bg-brand-charcoal text-white px-2 py-0.5 rounded-full\">{item.badge}</span>}\r\n                                                </div>\r\n                                            </div>\r\n                                            <ul className=\"mt-3 space-y-1\">\r\n                                                {item.features?.slice(0, 3).map((f, i) => (\r\n                                                    <li key={i} className=\"text-xs text-gray-500 flex items-start gap-1\">\r\n                                                        <span className=\"text-brand-teal text-[10px] mt-0.5\">‚óè</span> {f}\r\n                                                    </li>\r\n                                                ))}\r\n                                                {(item.features?.length || 0) > 3 && (\r\n                                                    <li className=\"text-xs text-gray-400 italic\">+{item.features.length - 3} more...</li>\r\n                                                )}\r\n                                            </ul>\r\n                                        </div>\r\n                                    ))}\r\n                                    {(!cat.items || cat.items.length === 0) && (\r\n                                        <div className=\"col-span-full py-8 text-center text-gray-400 text-sm italic border-dashed border-2 border-gray-100 rounded-lg\">\r\n                                            No items in this category for this tier.\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Categories View */}\r\n            {view === 'categories' && (\r\n                <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                    <div className=\"p-4 border-b flex justify-between items-center\">\r\n                        <h3 className=\"font-bold\">All Categories</h3>\r\n                        <button\r\n                            onClick={() => { setModalType('category'); setEditData(null); setItemForm({}); setShowModal(true); }}\r\n                            className=\"btn-primary text-sm px-4 py-2\"\r\n                        >\r\n                            New Category\r\n                        </button>\r\n                    </div>\r\n                    <table className=\"w-full text-left text-sm\">\r\n                        <thead className=\"bg-gray-50 text-gray-500\">\r\n                            <tr>\r\n                                <th className=\"px-6 py-4 font-medium\">Name</th>\r\n                                <th className=\"px-6 py-4 font-medium\">Headline</th>\r\n                                <th className=\"px-6 py-4 font-medium text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-gray-100\">\r\n                            {categories.map((cat) => (\r\n                                <tr key={cat.id} className=\"hover:bg-gray-50\">\r\n                                    <td className=\"px-6 py-4 font-medium\">{cat.name}</td>\r\n                                    <td className=\"px-6 py-4 text-gray-600\">{cat.headline}</td>\r\n                                    <td className=\"px-6 py-4 text-right\">\r\n                                        <div className=\"flex items-center justify-end gap-2\">\r\n                                            <button\r\n                                                onClick={() => { setModalType('category'); setEditData(cat); setItemForm(cat); setShowModal(true); }}\r\n                                                className=\"p-1 text-gray-400 hover:text-blue-500\"\r\n                                            >\r\n                                                <span className=\"material-symbols-outlined text-[18px]\">edit</span>\r\n                                            </button>\r\n                                            <button\r\n                                                onClick={() => handleDelete(cat.id, 'categories')}\r\n                                                className=\"p-1 text-gray-400 hover:text-red-500\"\r\n                                            >\r\n                                                <span className=\"material-symbols-outlined text-[18px]\">delete</span>\r\n                                            </button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n            )}\r\n\r\n            {showModal && <Modal />}\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}