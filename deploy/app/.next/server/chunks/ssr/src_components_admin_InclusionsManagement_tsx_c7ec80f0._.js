module.exports=[95772,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({initialCategories:a}){let[d,e]=(0,c.useState)("content"),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)("item"),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)({features:[]}),[x,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{z()},[]),(0,c.useEffect)(()=>{j?A(j):f.length>0&&k(f[0].id)},[f,j]);let z=async()=>{o(!0);try{let[a,b]=await Promise.all([fetch("http://localhost:3001/api/inclusions/tiers"),fetch("http://localhost:3001/api/inclusions/categories")]),c=await a.json(),d=await b.json();c.success&&(g(c.data),c.data.length>0&&!j&&k(c.data[0].id)),d.success&&i(d.data)}catch(a){console.error(a)}finally{o(!1)}},A=async a=>{let b=f.find(b=>b.id===a);if(b)try{let a=await fetch(`http://localhost:3001/api/inclusions/tiers/${b.slug}`),c=await a.json();c.success&&m(c.data.categories)}catch(a){console.error(a)}},B=async a=>{if(!a.target.files||0===a.target.files.length)return;let b=a.target.files[0],c=new FormData;c.append("file",b),y(!0);try{let a=await fetch("http://localhost:3001/api/upload?bucket=GENERAL&folder=inclusions",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("admin_session")}`},body:c}),b=await a.json();b.success?w(a=>({...a,imageUrl:b.data.publicUrl})):alert("Upload failed: "+b.message)}catch(a){console.error(a),alert("Upload error")}finally{y(!1)}},C=async a=>{a.preventDefault();let b=localStorage.getItem("admin_session");try{let a="http://localhost:3001/api/inclusions/",c=t?"PUT":"POST",d={};"item"===r?(a+=`items${t?"/"+t.id:""}`,d={...v,tierId:j,categoryId:v.categoryId}):"category"===r?(a+=`categories${t?"/"+t.id:""}`,d=v):"tier"===r&&(a+=`tiers${t?"/"+t.id:""}`,d=v);let e=await fetch(a,{method:c,headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(d)}),f=await e.json();f.success?(q(!1),z(),j&&A(j)):alert("Error: "+f.message)}catch(a){console.error(a)}},D=async(a,b)=>{if(!confirm("Are you sure?"))return;let c=localStorage.getItem("admin_session");try{(await fetch(`http://localhost:3001/api/inclusions/${b}/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}})).ok&&(z(),j&&A(j))}catch(a){console.error(a)}},E=(a,b)=>{s("item"),u(b||null),w(b?{...b}:{categoryId:a.id,tierId:j,features:[],title:"",description:"",imageUrl:"",badge:""}),q(!0)};return n&&0===f.length?(0,b.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading inclusions data..."}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Inclusions Management"}),(0,b.jsxs)("div",{className:"flex bg-white rounded-lg p-1 border shadow-sm",children:[(0,b.jsx)("button",{onClick:()=>e("content"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"content"===d?"bg-brand-charcoal text-white shadow":"text-gray-500 hover:text-gray-900"}`,children:"Content"}),(0,b.jsx)("button",{onClick:()=>e("categories"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"categories"===d?"bg-brand-charcoal text-white shadow":"text-gray-500 hover:text-gray-900"}`,children:"Categories"}),(0,b.jsx)("button",{onClick:()=>e("tiers"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"tiers"===d?"bg-brand-charcoal text-white shadow":"text-gray-500 hover:text-gray-900"}`,children:"Tiers"})]})]}),"content"===d&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg w-max",children:f.map(a=>(0,b.jsx)("button",{onClick:()=>k(a.id),className:`px-6 py-2 rounded-md font-medium text-sm transition-all ${j===a.id?"bg-white text-brand-charcoal shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:a.name},a.id))}),(0,b.jsx)("div",{className:"grid gap-8",children:l.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 bg-gray-50 border-b border-gray-100 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"font-bold text-lg text-brand-charcoal",children:a.name}),(0,b.jsxs)("button",{onClick:()=>E(a),className:"text-xs font-bold text-brand-teal uppercase tracking-wider flex items-center gap-1 hover:text-teal-700",children:[(0,b.jsx)("span",{className:"material-symbols-outlined text-sm",children:"add"})," Add Item"]})]}),(0,b.jsxs)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.items?.map(c=>(0,b.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative group",children:[(0,b.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 p-1 rounded shadow-sm",children:[(0,b.jsx)("button",{onClick:()=>E(a,c),className:"p-1 hover:text-blue-500",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"edit"})}),(0,b.jsx)("button",{onClick:()=>D(c.id,"items"),className:"p-1 hover:text-red-500",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[c.imageUrl&&(0,b.jsx)("img",{src:c.imageUrl,alt:c.title,className:"w-16 h-16 object-cover rounded bg-gray-100"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-bold text-sm mb-1",children:c.title}),c.badge&&(0,b.jsx)("span",{className:"text-[10px] font-bold bg-brand-charcoal text-white px-2 py-0.5 rounded-full",children:c.badge})]})]}),(0,b.jsxs)("ul",{className:"mt-3 space-y-1",children:[c.features?.slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"text-xs text-gray-500 flex items-start gap-1",children:[(0,b.jsx)("span",{className:"text-brand-teal text-[10px] mt-0.5",children:"â—"})," ",a]},c)),(c.features?.length||0)>3&&(0,b.jsxs)("li",{className:"text-xs text-gray-400 italic",children:["+",c.features.length-3," more..."]})]})]},c.id)),(!a.items||0===a.items.length)&&(0,b.jsx)("div",{className:"col-span-full py-8 text-center text-gray-400 text-sm italic border-dashed border-2 border-gray-100 rounded-lg",children:"No items in this category for this tier."})]})]},a.id))})]}),"categories"===d&&(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,b.jsx)("h3",{className:"font-bold",children:"All Categories"}),(0,b.jsx)("button",{onClick:()=>{s("category"),u(null),w({}),q(!0)},className:"btn-primary text-sm px-4 py-2",children:"New Category"})]}),(0,b.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50 text-gray-500",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 font-medium",children:"Name"}),(0,b.jsx)("th",{className:"px-6 py-4 font-medium",children:"Headline"}),(0,b.jsx)("th",{className:"px-6 py-4 font-medium text-right",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:h.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-6 py-4 font-medium",children:a.name}),(0,b.jsx)("td",{className:"px-6 py-4 text-gray-600",children:a.headline}),(0,b.jsx)("td",{className:"px-6 py-4 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>{s("category"),u(a),w(a),q(!0)},className:"p-1 text-gray-400 hover:text-blue-500",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),(0,b.jsx)("button",{onClick:()=>D(a.id,"categories"),className:"p-1 text-gray-400 hover:text-red-500",children:(0,b.jsx)("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},a.id))})]})]}),p&&(0,b.jsx)(()=>(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("h3",{className:"text-xl font-bold mb-6 capitalize",children:[t?"Edit":"Add"," ",r]}),(0,b.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[("item"===r||"category"===r||"tier"===r)&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Name / Title"}),(0,b.jsx)("input",{className:"w-full border rounded p-2",type:"text",value:v.title||v.name||"",onChange:a=>w(b=>({...b,["item"===r?"title":"name"]:a.target.value})),required:!0})]}),"category"===r&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Headline"}),(0,b.jsx)("input",{className:"w-full border rounded p-2",type:"text",value:v.headline||"",onChange:a=>w(b=>({...b,headline:a.target.value}))})]}),"item"===r&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Description"}),(0,b.jsx)("textarea",{className:"w-full border rounded p-2 h-24",value:v.description||"",onChange:a=>w(b=>({...b,description:a.target.value}))})]}),(0,b.jsxs)("div",{className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Badge (Optional)"}),(0,b.jsx)("input",{className:"w-full border rounded p-2",type:"text",placeholder:"e.g. New Release",value:v.badge||"",onChange:a=>w(b=>({...b,badge:a.target.value}))})]}),(0,b.jsxs)("div",{className:"w-24",children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Order"}),(0,b.jsx)("input",{className:"w-full border rounded p-2",type:"number",value:v.sortOrder||0,onChange:a=>w(b=>({...b,sortOrder:parseInt(a.target.value)}))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Features (One per line)"}),(0,b.jsx)("textarea",{className:"w-full border rounded p-2 h-32 bg-gray-50 font-mono text-sm",placeholder:"Feature 1 Feature 2 Feature 3",value:Array.isArray(v.features)?v.features.join("\n"):"",onChange:a=>w(b=>({...b,features:a.target.value.split("\n")}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Image"}),(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[v.imageUrl&&(0,b.jsx)("img",{src:v.imageUrl,alt:"Preview",className:"w-24 h-24 object-cover rounded border"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:B,className:"block w-full text-sm text-gray-500   file:mr-4 file:py-2 file:px-4   file:rounded-full file:border-0   file:text-sm file:font-semibold   file:bg-brand-charcoal file:text-white   hover:file:bg-black"}),x&&(0,b.jsx)("p",{className:"text-sm text-blue-500 mt-1",children:"Uploading..."}),(0,b.jsx)("input",{type:"hidden",value:v.imageUrl||""})]})]})]})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 mt-8 pt-4 border-t",children:[(0,b.jsx)("button",{type:"button",onClick:()=>q(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700 font-medium",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",className:"px-6 py-2 bg-brand-charcoal text-white rounded font-bold hover:bg-black transition-transform active:scale-95",children:"Save"})]})]})]})}),{})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=src_components_admin_InclusionsManagement_tsx_c7ec80f0._.js.map