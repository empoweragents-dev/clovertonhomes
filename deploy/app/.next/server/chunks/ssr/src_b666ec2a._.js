module.exports=[41361,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246);function f({initialData:a,isEditing:f=!1,id:g}){let h=(0,d.useRouter)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)({title:"",designId:"",estateId:"",regionId:"",housePrice:"",landPrice:"",bedrooms:"",bathrooms:"",garages:"",houseSize:"",landWidth:"",landDepth:"",address:"",lotNumber:"",featuredImage:"",description:"",isActive:!0,isLandReady:!1,badge:""}),[o,p]=(0,c.useState)([]);(0,c.useEffect)(()=>{a&&n({title:a.title||"",designId:a.designId||"",estateId:a.estateId||"",regionId:a.regionId||"",housePrice:(a.housePrice/100).toString(),landPrice:(a.landPrice/100).toString(),bedrooms:a.bedrooms?.toString()||"",bathrooms:a.bathrooms?.toString()||"",garages:a.garages?.toString()||"",houseSize:a.squareMeters?.toString()||"",landWidth:a.landWidth||"",landDepth:a.landDepth||"",address:a.address||"",lotNumber:a.lotNumber||"",featuredImage:a.featuredImage||"",description:a.description||"",isActive:a.isActive??!0,isLandReady:a.isLandReady??!1,badge:a.badge||""})},[a]),(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("http://localhost:3001/api/designs?limit=100"),b=await a.json();p(b.data||[])}catch(a){console.error("Error loading form data",a)}})()},[]);let q=async a=>{a.preventDefault(),l(!0);try{let a={...m,housePrice:Math.round(100*parseFloat(m.housePrice||"0")),landPrice:Math.round(100*parseFloat(m.landPrice||"0")),totalPrice:Math.round((parseFloat(m.housePrice||"0")+parseFloat(m.landPrice||"0"))*100),bedrooms:parseInt(m.bedrooms||"0"),bathrooms:parseInt(m.bathrooms||"0"),garages:parseInt(m.garages||"0"),squareMeters:parseInt(m.houseSize||"0")},b=f?`http://localhost:3001/api/properties/${g}`:"http://localhost:3001/api/properties";if(!(await fetch(b,{method:f?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw Error("Failed to save");h.push("/admin/properties"),h.refresh()}catch(a){console.error(a),alert("Failed to save property")}finally{l(!1)}};return(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,b.jsx)(e.default,{href:"/admin/properties",className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",children:(0,b.jsx)("span",{className:"material-symbols-outlined",children:"arrow_back"})}),(0,b.jsx)("h1",{className:"text-3xl font-heading font-bold text-gray-900",children:f?"Edit Property":"Add Property"})]}),(0,b.jsxs)("form",{onSubmit:q,className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8",children:[(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Basic Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Title"}),(0,b.jsx)("input",{type:"text",required:!0,value:m.title,onChange:a=>n({...m,title:a.target.value}),className:"w-full form-input rounded-lg border-gray-300",placeholder:"e.g. Ascot 28 at Cloverton"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"House Design"}),(0,b.jsxs)("select",{required:!0,value:m.designId,onChange:a=>n({...m,designId:a.target.value}),className:"w-full form-select rounded-lg border-gray-300",children:[(0,b.jsx)("option",{value:"",children:"Select Design..."}),o.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Region ID (UUID)"}),(0,b.jsx)("input",{type:"text",required:!0,value:m.regionId,onChange:a=>n({...m,regionId:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Estate ID (UUID)"}),(0,b.jsx)("input",{type:"text",value:m.estateId,onChange:a=>n({...m,estateId:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{rows:3,value:m.description,onChange:a=>n({...m,description:a.target.value}),className:"w-full form-textarea rounded-lg border-gray-300"})]})]})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Pricing & Land"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"House Price ($)"}),(0,b.jsx)("input",{type:"number",required:!0,value:m.housePrice,onChange:a=>n({...m,housePrice:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Price ($)"}),(0,b.jsx)("input",{type:"number",required:!0,value:m.landPrice,onChange:a=>n({...m,landPrice:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Total Price (Auto-calc)"}),(0,b.jsxs)("div",{className:"py-2 px-3 bg-gray-50 rounded-lg text-gray-600",children:["$",(parseFloat(m.housePrice||"0")+parseFloat(m.landPrice||"0")).toLocaleString()]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Lot Number"}),(0,b.jsx)("input",{type:"text",value:m.lotNumber,onChange:a=>n({...m,lotNumber:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Address"}),(0,b.jsx)("input",{type:"text",value:m.address,onChange:a=>n({...m,address:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Ready?"}),(0,b.jsxs)("div",{className:"flex items-center mt-2",children:[(0,b.jsx)("input",{type:"checkbox",checked:m.isLandReady,onChange:a=>n({...m,isLandReady:a.target.checked}),className:"form-checkbox h-5 w-5 text-brand-teal rounded"}),(0,b.jsx)("span",{className:"ml-2 text-gray-600",children:"Yes, ready to build"})]})]})]})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Specifications"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Bedrooms"}),(0,b.jsx)("input",{type:"number",required:!0,value:m.bedrooms,onChange:a=>n({...m,bedrooms:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Bathrooms"}),(0,b.jsx)("input",{type:"number",required:!0,value:m.bathrooms,onChange:a=>n({...m,bathrooms:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Garages"}),(0,b.jsx)("input",{type:"number",required:!0,value:m.garages,onChange:a=>n({...m,garages:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"House Size (mÂ²)"}),(0,b.jsx)("input",{type:"number",value:m.houseSize,onChange:a=>n({...m,houseSize:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Width (m)"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:m.landWidth,onChange:a=>n({...m,landWidth:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Depth (m)"}),(0,b.jsx)("input",{type:"number",step:"0.01",value:m.landDepth,onChange:a=>n({...m,landDepth:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]})]})]}),(0,b.jsxs)("section",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Media & Status"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Featured Image URL"}),(0,b.jsx)("input",{type:"text",value:m.featuredImage,onChange:a=>n({...m,featuredImage:a.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:m.isActive?"active":"draft",onChange:a=>n({...m,isActive:"active"===a.target.value}),className:"w-full form-select rounded-lg border-gray-300",children:[(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"draft",children:"Draft"})]})]})]})]}),(0,b.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,b.jsx)(e.default,{href:"/admin/properties",className:"px-6 py-3 rounded-xl border border-gray-300 font-bold text-gray-600 hover:bg-gray-50",children:"Cancel"}),(0,b.jsx)("button",{type:"submit",disabled:k,className:"px-8 py-3 rounded-xl bg-brand-teal text-white font-bold hover:opacity-90 disabled:opacity-50",children:k?"Saving...":"Save Property"})]})]})]})}a.s(["default",()=>f])},90150,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(41361);function f(){let a=(0,d.useParams)().id,[f,g]=(0,c.useState)(null),[h,i]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{let b=async()=>{try{let b=await fetch(`http://localhost:3001/api/properties/${a}`);if(b.ok){let a=await b.json();g(a.data)}}catch(a){console.error(a)}finally{i(!1)}};a&&b()},[a]),h)?(0,b.jsx)("div",{className:"p-10 text-center",children:"Loading..."}):f?(0,b.jsx)(e.default,{isEditing:!0,id:a,initialData:f}):(0,b.jsx)("div",{className:"p-10 text-center",children:"Property not found"})}a.s(["default",()=>f])}];

//# sourceMappingURL=src_b666ec2a._.js.map