{"version":3,"sources":["../../../../src/app/admin/properties/page.tsx"],"sourcesContent":["\r\n'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport Link from 'next/link'\r\n\r\nexport default function AdminProperties() {\r\n    const [properties, setProperties] = useState<any[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const fetchProperties = async () => {\r\n            try {\r\n                const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/properties?limit=100`)\r\n                const data = await res.json()\r\n                setProperties(data.data || [])\r\n            } catch (err) {\r\n                console.error('Failed to fetch properties')\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        fetchProperties()\r\n    }, [])\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Are you sure you want to delete this property?')) return\r\n\r\n        try {\r\n            const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL || 'http://localhost:3001/api'}/properties/${id}`, {\r\n                method: 'DELETE',\r\n                // Add headers for auth if needed later\r\n            })\r\n            if (res.ok) {\r\n                setProperties(properties.filter(p => p.id !== id))\r\n            }\r\n        } catch (err) {\r\n            console.error('Failed to delete property')\r\n        }\r\n    }\r\n\r\n    if (loading) return <div>Loading properties...</div>\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-heading font-bold text-gray-900\">Properties</h1>\r\n                    <p className=\"text-gray-500 mt-1\">Manage all house & land packages</p>\r\n                </div>\r\n                <Link\r\n                    href=\"/admin/properties/new\"\r\n                    className=\"bg-brand-teal text-white px-5 py-2.5 rounded-xl font-bold hover:opacity-90 transition-opacity flex items-center gap-2\"\r\n                >\r\n                    <span className=\"material-symbols-outlined\">add</span>\r\n                    Add Property\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden\">\r\n                <table className=\"w-full text-left\">\r\n                    <thead className=\"bg-gray-50 border-b border-gray-100\">\r\n                        <tr>\r\n                            <th className=\"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider\">Image</th>\r\n                            <th className=\"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider\">Title</th>\r\n                            <th className=\"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider\">Price</th>\r\n                            <th className=\"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider\">Estate / Region</th>\r\n                            <th className=\"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider\">Status</th>\r\n                            <th className=\"px-6 py-4 text-xs font-bold text-gray-500 uppercase tracking-wider text-right\">Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody className=\"divide-y divide-gray-100\">\r\n                        {properties.map((property) => (\r\n                            <tr key={property.id} className=\"hover:bg-gray-50 transition-colors\">\r\n                                <td className=\"px-6 py-4\">\r\n                                    <div className=\"w-16 h-12 rounded-lg bg-gray-100 overflow-hidden relative\">\r\n                                        {/* eslint-disable-next-line @next/next/no-img-element */}\r\n                                        <img\r\n                                            src={property.featuredImage || '/placeholder.jpg'}\r\n                                            alt={property.title}\r\n                                            className=\"w-full h-full object-cover\"\r\n                                        />\r\n                                    </div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 font-medium text-gray-900\">\r\n                                    {property.title}\r\n                                    <div className=\"text-xs text-gray-400 font-normal mt-0.5\">{property.address}</div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 text-gray-600\">\r\n                                    ${(property.totalPrice / 100).toLocaleString()}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 text-gray-600 text-sm\">\r\n                                    <span className=\"block\">{property.estate?.name}</span>\r\n                                    <span className=\"text-xs text-gray-400\">{property.region?.name}</span>\r\n                                </td>\r\n                                <td className=\"px-6 py-4\">\r\n                                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${property.isActive\r\n                                            ? 'bg-green-100 text-green-800'\r\n                                            : 'bg-gray-100 text-gray-800'\r\n                                        }`}>\r\n                                        {property.isActive ? 'Active' : 'Draft'}\r\n                                    </span>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 text-right\">\r\n                                    <div className=\"flex items-center justify-end gap-2\">\r\n                                        <button className=\"p-2 text-gray-400 hover:text-brand-teal transition-colors\">\r\n                                            <span className=\"material-symbols-outlined text-lg\">edit</span>\r\n                                        </button>\r\n                                        <button\r\n                                            onClick={() => handleDelete(property.id)}\r\n                                            className=\"p-2 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                        >\r\n                                            <span className=\"material-symbols-outlined text-lg\">delete</span>\r\n                                        </button>\r\n                                    </div>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                        {properties.length === 0 && (\r\n                            <tr>\r\n                                <td colSpan={6} className=\"px-6 py-12 text-center text-gray-500\">\r\n                                    No properties found. Click \"Add Property\" to create one.\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}