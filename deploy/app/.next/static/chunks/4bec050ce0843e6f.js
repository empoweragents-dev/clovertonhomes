(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,68669,e=>{"use strict";var t=e.i(43476),a=e.i(71645);function s({initialCategories:e}){let[s,l]=(0,a.useState)("content"),[r,i]=(0,a.useState)([]),[d,n]=(0,a.useState)([]),[o,c]=(0,a.useState)(""),[m,x]=(0,a.useState)([]),[h,u]=(0,a.useState)(!0),[g,p]=(0,a.useState)(!1),[b,f]=(0,a.useState)("item"),[y,j]=(0,a.useState)(null),[N,v]=(0,a.useState)({features:[]}),[w,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{k()},[]),(0,a.useEffect)(()=>{o?S(o):r.length>0&&c(r[0].id)},[r,o]);let k=async()=>{u(!0);try{let[e,t]=await Promise.all([fetch("http://localhost:3001/api/inclusions/tiers"),fetch("http://localhost:3001/api/inclusions/categories")]),a=await e.json(),s=await t.json();a.success&&(i(a.data),a.data.length>0&&!o&&c(a.data[0].id)),s.success&&n(s.data)}catch(e){console.error(e)}finally{u(!1)}},S=async e=>{let t=r.find(t=>t.id===e);if(t)try{let e=await fetch(`http://localhost:3001/api/inclusions/tiers/${t.slug}`),a=await e.json();a.success&&x(a.data.categories)}catch(e){console.error(e)}},U=async e=>{if(!e.target.files||0===e.target.files.length)return;let t=e.target.files[0],a=new FormData;a.append("file",t),C(!0);try{let e=await fetch("http://localhost:3001/api/upload?bucket=GENERAL&folder=inclusions",{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("admin_session")}`},body:a}),t=await e.json();t.success?v(e=>({...e,imageUrl:t.data.publicUrl})):alert("Upload failed: "+t.message)}catch(e){console.error(e),alert("Upload error")}finally{C(!1)}},A=async e=>{e.preventDefault();let t=localStorage.getItem("admin_session");try{let e="http://localhost:3001/api/inclusions/",a=y?"PUT":"POST",s={};"item"===b?(e+=`items${y?"/"+y.id:""}`,s={...N,tierId:o,categoryId:N.categoryId}):"category"===b?(e+=`categories${y?"/"+y.id:""}`,s=N):"tier"===b&&(e+=`tiers${y?"/"+y.id:""}`,s=N);let l=await fetch(e,{method:a,headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(s)}),r=await l.json();r.success?(p(!1),k(),o&&S(o)):alert("Error: "+r.message)}catch(e){console.error(e)}},$=async(e,t)=>{if(!confirm("Are you sure?"))return;let a=localStorage.getItem("admin_session");try{(await fetch(`http://localhost:3001/api/inclusions/${t}/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok&&(k(),o&&S(o))}catch(e){console.error(e)}},I=(e,t)=>{f("item"),j(t||null),v(t?{...t}:{categoryId:e.id,tierId:o,features:[],title:"",description:"",imageUrl:"",badge:""}),p(!0)};return h&&0===r.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading inclusions data..."}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Inclusions Management"}),(0,t.jsxs)("div",{className:"flex bg-white rounded-lg p-1 border shadow-sm",children:[(0,t.jsx)("button",{onClick:()=>l("content"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"content"===s?"bg-brand-charcoal text-white shadow":"text-gray-500 hover:text-gray-900"}`,children:"Content"}),(0,t.jsx)("button",{onClick:()=>l("categories"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"categories"===s?"bg-brand-charcoal text-white shadow":"text-gray-500 hover:text-gray-900"}`,children:"Categories"}),(0,t.jsx)("button",{onClick:()=>l("tiers"),className:`px-4 py-2 text-sm font-medium rounded-md transition-all ${"tiers"===s?"bg-brand-charcoal text-white shadow":"text-gray-500 hover:text-gray-900"}`,children:"Tiers"})]})]}),"content"===s&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"flex gap-2 p-1 bg-gray-100 rounded-lg w-max",children:r.map(e=>(0,t.jsx)("button",{onClick:()=>c(e.id),className:`px-6 py-2 rounded-md font-medium text-sm transition-all ${o===e.id?"bg-white text-brand-charcoal shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:e.name},e.id))}),(0,t.jsx)("div",{className:"grid gap-8",children:m.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 bg-gray-50 border-b border-gray-100 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-brand-charcoal",children:e.name}),(0,t.jsxs)("button",{onClick:()=>I(e),className:"text-xs font-bold text-brand-teal uppercase tracking-wider flex items-center gap-1 hover:text-teal-700",children:[(0,t.jsx)("span",{className:"material-symbols-outlined text-sm",children:"add"})," Add Item"]})]}),(0,t.jsxs)("div",{className:"p-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.items?.map(a=>(0,t.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow relative group",children:[(0,t.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 p-1 rounded shadow-sm",children:[(0,t.jsx)("button",{onClick:()=>I(e,a),className:"p-1 hover:text-blue-500",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-lg",children:"edit"})}),(0,t.jsx)("button",{onClick:()=>$(a.id,"items"),className:"p-1 hover:text-red-500",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[a.imageUrl&&(0,t.jsx)("img",{src:a.imageUrl,alt:a.title,className:"w-16 h-16 object-cover rounded bg-gray-100"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-bold text-sm mb-1",children:a.title}),a.badge&&(0,t.jsx)("span",{className:"text-[10px] font-bold bg-brand-charcoal text-white px-2 py-0.5 rounded-full",children:a.badge})]})]}),(0,t.jsxs)("ul",{className:"mt-3 space-y-1",children:[a.features?.slice(0,3).map((e,a)=>(0,t.jsxs)("li",{className:"text-xs text-gray-500 flex items-start gap-1",children:[(0,t.jsx)("span",{className:"text-brand-teal text-[10px] mt-0.5",children:"â—"})," ",e]},a)),(a.features?.length||0)>3&&(0,t.jsxs)("li",{className:"text-xs text-gray-400 italic",children:["+",a.features.length-3," more..."]})]})]},a.id)),(!e.items||0===e.items.length)&&(0,t.jsx)("div",{className:"col-span-full py-8 text-center text-gray-400 text-sm italic border-dashed border-2 border-gray-100 rounded-lg",children:"No items in this category for this tier."})]})]},e.id))})]}),"categories"===s&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,t.jsxs)("div",{className:"p-4 border-b flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-bold",children:"All Categories"}),(0,t.jsx)("button",{onClick:()=>{f("category"),j(null),v({}),p(!0)},className:"btn-primary text-sm px-4 py-2",children:"New Category"})]}),(0,t.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50 text-gray-500",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium",children:"Headline"}),(0,t.jsx)("th",{className:"px-6 py-4 font-medium text-right",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-100",children:d.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,t.jsx)("td",{className:"px-6 py-4 text-gray-600",children:e.headline}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,t.jsx)("button",{onClick:()=>{f("category"),j(e),v(e),p(!0)},className:"p-1 text-gray-400 hover:text-blue-500",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[18px]",children:"edit"})}),(0,t.jsx)("button",{onClick:()=>$(e.id,"categories"),className:"p-1 text-gray-400 hover:text-red-500",children:(0,t.jsx)("span",{className:"material-symbols-outlined text-[18px]",children:"delete"})})]})})]},e.id))})]})]}),g&&(0,t.jsx)(()=>(0,t.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold mb-6 capitalize",children:[y?"Edit":"Add"," ",b]}),(0,t.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[("item"===b||"category"===b||"tier"===b)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Name / Title"}),(0,t.jsx)("input",{className:"w-full border rounded p-2",type:"text",value:N.title||N.name||"",onChange:e=>v(t=>({...t,["item"===b?"title":"name"]:e.target.value})),required:!0})]}),"category"===b&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Headline"}),(0,t.jsx)("input",{className:"w-full border rounded p-2",type:"text",value:N.headline||"",onChange:e=>v(t=>({...t,headline:e.target.value}))})]}),"item"===b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Description"}),(0,t.jsx)("textarea",{className:"w-full border rounded p-2 h-24",value:N.description||"",onChange:e=>v(t=>({...t,description:e.target.value}))})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Badge (Optional)"}),(0,t.jsx)("input",{className:"w-full border rounded p-2",type:"text",placeholder:"e.g. New Release",value:N.badge||"",onChange:e=>v(t=>({...t,badge:e.target.value}))})]}),(0,t.jsxs)("div",{className:"w-24",children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Order"}),(0,t.jsx)("input",{className:"w-full border rounded p-2",type:"number",value:N.sortOrder||0,onChange:e=>v(t=>({...t,sortOrder:parseInt(e.target.value)}))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Features (One per line)"}),(0,t.jsx)("textarea",{className:"w-full border rounded p-2 h-32 bg-gray-50 font-mono text-sm",placeholder:"Feature 1 Feature 2 Feature 3",value:Array.isArray(N.features)?N.features.join("\n"):"",onChange:e=>v(t=>({...t,features:e.target.value.split("\n")}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold mb-1",children:"Image"}),(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[N.imageUrl&&(0,t.jsx)("img",{src:N.imageUrl,alt:"Preview",className:"w-24 h-24 object-cover rounded border"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:U,className:"block w-full text-sm text-gray-500   file:mr-4 file:py-2 file:px-4   file:rounded-full file:border-0   file:text-sm file:font-semibold   file:bg-brand-charcoal file:text-white   hover:file:bg-black"}),w&&(0,t.jsx)("p",{className:"text-sm text-blue-500 mt-1",children:"Uploading..."}),(0,t.jsx)("input",{type:"hidden",value:N.imageUrl||""})]})]})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-8 pt-4 border-t",children:[(0,t.jsx)("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700 font-medium",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-6 py-2 bg-brand-charcoal text-white rounded font-bold hover:bg-black transition-transform active:scale-95",children:"Save"})]})]})]})}),{})]})}e.s(["default",()=>s])}]);