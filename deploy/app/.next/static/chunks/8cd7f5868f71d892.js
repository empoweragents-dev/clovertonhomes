(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,41456,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),r=e.i(22016);function l({initialData:e,isEditing:l=!1,id:d}){let o=(0,s.useRouter)(),[i,n]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[m,g]=(0,t.useState)({title:"",designId:"",estateId:"",regionId:"",housePrice:"",landPrice:"",bedrooms:"",bathrooms:"",garages:"",houseSize:"",landWidth:"",landDepth:"",address:"",lotNumber:"",featuredImage:"",description:"",isActive:!0,isLandReady:!1,badge:""}),[b,x]=(0,t.useState)([]);(0,t.useEffect)(()=>{e&&g({title:e.title||"",designId:e.designId||"",estateId:e.estateId||"",regionId:e.regionId||"",housePrice:(e.housePrice/100).toString(),landPrice:(e.landPrice/100).toString(),bedrooms:e.bedrooms?.toString()||"",bathrooms:e.bathrooms?.toString()||"",garages:e.garages?.toString()||"",houseSize:e.squareMeters?.toString()||"",landWidth:e.landWidth||"",landDepth:e.landDepth||"",address:e.address||"",lotNumber:e.lotNumber||"",featuredImage:e.featuredImage||"",description:e.description||"",isActive:e.isActive??!0,isLandReady:e.isLandReady??!1,badge:e.badge||""})},[e]),(0,t.useEffect)(()=>{(async()=>{try{let e=await fetch("http://localhost:3001/api/designs?limit=100"),a=await e.json();x(a.data||[])}catch(e){console.error("Error loading form data",e)}})()},[]);let h=async e=>{e.preventDefault(),u(!0);try{let e={...m,housePrice:Math.round(100*parseFloat(m.housePrice||"0")),landPrice:Math.round(100*parseFloat(m.landPrice||"0")),totalPrice:Math.round((parseFloat(m.housePrice||"0")+parseFloat(m.landPrice||"0"))*100),bedrooms:parseInt(m.bedrooms||"0"),bathrooms:parseInt(m.bathrooms||"0"),garages:parseInt(m.garages||"0"),squareMeters:parseInt(m.houseSize||"0")},a=l?`http://localhost:3001/api/properties/${d}`:"http://localhost:3001/api/properties";if(!(await fetch(a,{method:l?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)throw Error("Failed to save");o.push("/admin/properties"),o.refresh()}catch(e){console.error(e),alert("Failed to save property")}finally{u(!1)}};return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)(r.default,{href:"/admin/properties",className:"p-2 rounded-full hover:bg-gray-100 text-gray-500",children:(0,a.jsx)("span",{className:"material-symbols-outlined",children:"arrow_back"})}),(0,a.jsx)("h1",{className:"text-3xl font-heading font-bold text-gray-900",children:l?"Edit Property":"Add Property"})]}),(0,a.jsxs)("form",{onSubmit:h,className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-8 space-y-8",children:[(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Basic Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Title"}),(0,a.jsx)("input",{type:"text",required:!0,value:m.title,onChange:e=>g({...m,title:e.target.value}),className:"w-full form-input rounded-lg border-gray-300",placeholder:"e.g. Ascot 28 at Cloverton"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"House Design"}),(0,a.jsxs)("select",{required:!0,value:m.designId,onChange:e=>g({...m,designId:e.target.value}),className:"w-full form-select rounded-lg border-gray-300",children:[(0,a.jsx)("option",{value:"",children:"Select Design..."}),b.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Region ID (UUID)"}),(0,a.jsx)("input",{type:"text",required:!0,value:m.regionId,onChange:e=>g({...m,regionId:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Estate ID (UUID)"}),(0,a.jsx)("input",{type:"text",value:m.estateId,onChange:e=>g({...m,estateId:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Description"}),(0,a.jsx)("textarea",{rows:3,value:m.description,onChange:e=>g({...m,description:e.target.value}),className:"w-full form-textarea rounded-lg border-gray-300"})]})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Pricing & Land"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"House Price ($)"}),(0,a.jsx)("input",{type:"number",required:!0,value:m.housePrice,onChange:e=>g({...m,housePrice:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Price ($)"}),(0,a.jsx)("input",{type:"number",required:!0,value:m.landPrice,onChange:e=>g({...m,landPrice:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Total Price (Auto-calc)"}),(0,a.jsxs)("div",{className:"py-2 px-3 bg-gray-50 rounded-lg text-gray-600",children:["$",(parseFloat(m.housePrice||"0")+parseFloat(m.landPrice||"0")).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Lot Number"}),(0,a.jsx)("input",{type:"text",value:m.lotNumber,onChange:e=>g({...m,lotNumber:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Address"}),(0,a.jsx)("input",{type:"text",value:m.address,onChange:e=>g({...m,address:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Ready?"}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)("input",{type:"checkbox",checked:m.isLandReady,onChange:e=>g({...m,isLandReady:e.target.checked}),className:"form-checkbox h-5 w-5 text-brand-teal rounded"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Yes, ready to build"})]})]})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Specifications"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Bedrooms"}),(0,a.jsx)("input",{type:"number",required:!0,value:m.bedrooms,onChange:e=>g({...m,bedrooms:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Bathrooms"}),(0,a.jsx)("input",{type:"number",required:!0,value:m.bathrooms,onChange:e=>g({...m,bathrooms:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Garages"}),(0,a.jsx)("input",{type:"number",required:!0,value:m.garages,onChange:e=>g({...m,garages:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"House Size (mÂ²)"}),(0,a.jsx)("input",{type:"number",value:m.houseSize,onChange:e=>g({...m,houseSize:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Width (m)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:m.landWidth,onChange:e=>g({...m,landWidth:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Land Depth (m)"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:m.landDepth,onChange:e=>g({...m,landDepth:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-900 border-b pb-2",children:"Media & Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Featured Image URL"}),(0,a.jsx)("input",{type:"text",value:m.featuredImage,onChange:e=>g({...m,featuredImage:e.target.value}),className:"w-full form-input rounded-lg border-gray-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Status"}),(0,a.jsxs)("select",{value:m.isActive?"active":"draft",onChange:e=>g({...m,isActive:"active"===e.target.value}),className:"w-full form-select rounded-lg border-gray-300",children:[(0,a.jsx)("option",{value:"active",children:"Active"}),(0,a.jsx)("option",{value:"draft",children:"Draft"})]})]})]})]}),(0,a.jsxs)("div",{className:"pt-4 flex justify-end gap-3",children:[(0,a.jsx)(r.default,{href:"/admin/properties",className:"px-6 py-3 rounded-xl border border-gray-300 font-bold text-gray-600 hover:bg-gray-50",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:c,className:"px-8 py-3 rounded-xl bg-brand-teal text-white font-bold hover:opacity-90 disabled:opacity-50",children:c?"Saving...":"Save Property"})]})]})]})}e.s(["default",()=>l])},53157,e=>{"use strict";var a=e.i(43476),t=e.i(41456);function s(){return(0,a.jsx)(t.default,{isEditing:!1})}e.s(["default",()=>s])}]);